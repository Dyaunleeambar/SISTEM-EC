<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Evaluación de Colaboradores</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="main-container">
    <!-- Tarjeta fija arriba -->
    <div class="header-card">
      <div class="header-flex">
        <div class="header-main">
          <h1 class="header-title">Sistema de Estimulación para los Colaboradores</h1>
          <div class="counters">
            <div class="counter">
              <span class="counter-label">Total Colaboradores</span>
              <span id="totalCollaborators" class="counter-value">0</span>
            </div>
            <div class="counter">
              <span class="counter-label">Estimulación</span>
              <span id="withStimulation" class="counter-value">0</span>
            </div>
            <div class="counter">
              <span class="counter-label">Vacaciones</span>
              <span id="onVacation" class="counter-value">0</span>
            </div>
            <div class="counter">
              <span class="counter-label">Fin de Misión</span>
              <span id="endOfMission" class="counter-value">0</span>
            </div>            
          </div>
          <div id="messageBox" class="message-box"></div>
          <div class="import-section">
            <h2>Gestión de Datos</h2>                 
            <div class="add-collaborator-section">              
              <form id="addCollaboratorForm">
                  <input type="text" id="estadoInput" placeholder="Ubicación/Estado" required>
                  <input type="text" id="nombreInput" placeholder="Nombre y Apellidos" required>                  
                  <button type="submit">Agregar</button>
                  <button id="exportButton">Exportar a Excel</button>
                  <div class="conciliation-section">
                    <label for="conciliationMonth">Mes de Conciliación:</label>
                    <input type="month" id="conciliationMonth">
                    <button id="clearDatabaseButton">Limpiar Base de Datos</button> 
                  </div>                  
              </form>
            </div>                           
          </div>          
        </div>
        <div class="state-counters-card">
          <h3>Contadores por Estado</h3>
          <div id="stateCountersContent" class="location-buttons">
            <!-- Aquí se generan los botones dinámicamente -->
          </div>
        </div>
      </div>
    </div>

    <!-- Tarjeta de la tabla (scrollable) -->
    <div class="table-card">
      <!-- Tabla de colaboradores -->
      <table id="collaboratorsTable">
          <thead>
              <tr>
                <th>Estado</th>
                <th>Nombre del Colaborador</th>
                <th>Fecha de Salida</th>
                <th>Fecha de Entrada</th>
                <th title="Derecho a estimulación si permanece al menos 15 días en el país">Estimulación</th>
                <th title="Vacaciones si tiene fecha de salida y no de entrada">Vacaciones</th>
                <th title="Fin de Misión si el checkbox está marcado en edición">Fin de Misión</th>
                <th title="Días que el colaborador estuvo en el país durante el mes de conciliación">Días de Presencia</th>
                <th>Acciones</th>
              </tr>
          </thead>
          <tbody>
              <!-- Datos se cargarán dinámicamente -->
          </tbody>
      </table>
    </div>
  </div>
    <!-- Modal de edición -->
    <div id="editModal" class="modal" style="display:none;">
      <div class="modal-content">
        <span id="closeEditModal" class="close">&times;</span>
        <h3>Editar Colaborador</h3>
        <form id="editCollaboratorForm">
          <input type="hidden" id="editId">
          <input type="text" id="editNombre" placeholder="Nombre y Apellidos" required>
          <input type="text" id="editEstado" placeholder="Ubicación/Estado" required>
          <input type="date" id="editFechaSalida" placeholder="Fecha de Salida">
          <input type="date" id="editFechaEntrada" placeholder="Fecha de Entrada">
          <button type="submit">Guardar Cambios</button>
        </form>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
